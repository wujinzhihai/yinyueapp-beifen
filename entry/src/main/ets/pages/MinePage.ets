/**
 * ðŸ‘¤ æˆ‘çš„é¡µé¢
 *
 * åŠŸèƒ½: ç”¨æˆ·ä¿¡æ¯å’Œè®¾ç½®
 * - æ˜¾ç¤ºæ’­æ”¾ç»Ÿè®¡
 * - åº”ç”¨è®¾ç½®
 * - å…³äºŽä¿¡æ¯
 */

import { LocalMusicService } from '../services/LocalMusicService';
import promptAction from '@ohos.promptAction';

@Component
export struct MinePage {
  @State localMusicCount: number = 0;

  aboutToAppear() {
    this.localMusicCount = LocalMusicService.getCount();
  }

  build() {
    Column() {
      // æ ‡é¢˜æ 
      Row() {
        Text('æˆ‘çš„')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .fontColor('#333333')
      }
      .width('100%')
      .padding(16)
      .backgroundColor('#FFFFFF')

      // ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
      Column() {
        Row() {
          // å¤´åƒ
          Column() {
            Text('ðŸŽµ')
              .fontSize(40)
          }
          .width(80)
          .height(80)
          .borderRadius(40)
          .backgroundColor('#FF6B6B')
          .justifyContent(FlexAlign.Center)

          // ç”¨æˆ·ä¿¡æ¯
          Column() {
            Text('éŸ³ä¹çˆ±å¥½è€…')
              .fontSize(20)
              .fontWeight(FontWeight.Bold)
              .fontColor('#333333')

            Text('äº«å—éŸ³ä¹,äº«å—ç”Ÿæ´»')
              .fontSize(14)
              .fontColor('#999999')
              .margin({ top: 8 })
          }
          .alignItems(HorizontalAlign.Start)
          .margin({ left: 16 })
          .layoutWeight(1)
        }
        .width('100%')
        .padding(20)
      }
      .width('90%')
      .margin({ top: 16, left: '5%', right: '5%' })
      .backgroundColor('#FFFFFF')
      .borderRadius(12)
      .shadow({
        radius: 8,
        color: 'rgba(0, 0, 0, 0.1)',
        offsetX: 0,
        offsetY: 2
      })

      // ç»Ÿè®¡ä¿¡æ¯
      Row() {
        Column() {
          Text(`${this.localMusicCount}`)
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6B6B')
          Text('æœ¬åœ°æ­Œæ›²')
            .fontSize(12)
            .fontColor('#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)

        Column() {
          Text('0')
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6B6B')
          Text('æ’­æ”¾æ¬¡æ•°')
            .fontSize(12)
            .fontColor('#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)

        Column() {
          Text('0')
            .fontSize(24)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6B6B')
          Text('æ”¶è—æ­Œæ›²')
            .fontSize(12)
            .fontColor('#999999')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
      }
      .width('90%')
      .margin({ top: 16, left: '5%', right: '5%' })
      .padding(20)
      .backgroundColor('#FFFFFF')
      .borderRadius(12)
      .shadow({
        radius: 8,
        color: 'rgba(0, 0, 0, 0.1)',
        offsetX: 0,
        offsetY: 2
      })

      // åŠŸèƒ½åˆ—è¡¨
      Column() {
        // è®¾ç½®é¡¹
        this.SettingItem('âš™ï¸', 'è®¾ç½®', () => {
          promptAction.showToast({ message: 'è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­' });
        })

        Divider()
          .color('#F0F0F0')

        this.SettingItem('ðŸ“Š', 'æ’­æ”¾åŽ†å²', () => {
          promptAction.showToast({ message: 'æ’­æ”¾åŽ†å²åŠŸèƒ½å¼€å‘ä¸­' });
        })

        Divider()
          .color('#F0F0F0')

        this.SettingItem('â¤ï¸', 'æˆ‘çš„æ”¶è—', () => {
          promptAction.showToast({ message: 'æ”¶è—åŠŸèƒ½å¼€å‘ä¸­' });
        })

        Divider()
          .color('#F0F0F0')

        this.SettingItem('â„¹ï¸', 'å…³äºŽåº”ç”¨', () => {
          promptAction.showToast({ message: 'HarmonyOSéŸ³ä¹åº”ç”¨ v1.0.0' });
        })
      }
      .width('90%')
      .margin({ top: 16, left: '5%', right: '5%' })
      .backgroundColor('#FFFFFF')
      .borderRadius(12)
      .shadow({
        radius: 8,
        color: 'rgba(0, 0, 0, 0.1)',
        offsetX: 0,
        offsetY: 2
      })

      Blank()
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }

  @Builder
  SettingItem(icon: string, title: string, onClick: () => void) {
    Row() {
      Text(icon)
        .fontSize(24)
        .margin({ right: 12 })

      Text(title)
        .fontSize(16)
        .fontColor('#333333')
        .layoutWeight(1)

      Text('â€º')
        .fontSize(24)
        .fontColor('#CCCCCC')
    }
    .width('100%')
    .height(60)
    .padding({ left: 16, right: 16 })
    .onClick(onClick)
  }
}